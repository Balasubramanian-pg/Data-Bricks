# 31. Watermarking for Incremental Loads

Canonical documentation for 31. Watermarking for Incremental Loads. This document defines the conceptual model, terminology, and standard usage patterns.

> [!NOTE]
> This documentation is implementation-agnostic and intended to serve as a stable reference.

## 1. Purpose and Problem Space
Describe why 31. Watermarking for Incremental Loads exists and the class of problems it addresses.
Watermarking for incremental loads is a technique used to track changes in a dataset over time, allowing for efficient incremental data loading and processing. It addresses the problem of identifying and extracting only the new or updated data from a large dataset, reducing the overhead of processing the entire dataset. This is particularly useful in data warehousing, ETL (Extract, Transform, Load) processes, and real-time data integration scenarios.

## 2. Conceptual Overview
Provide a high-level mental model of the topic.
The conceptual model of watermarking for incremental loads involves assigning a watermark or a timestamp to each record in a dataset, indicating the last time the record was updated. When incremental data is loaded, the watermark is used to filter out records that have not changed since the last load, resulting in a subset of data that contains only the new or updated records.

## 3. Terminology and Definitions
| Term | Definition |
|------|------------|
| Watermark | A timestamp or a version number assigned to each record in a dataset, indicating the last time the record was updated. |
| Incremental Load | The process of loading only the new or updated data from a source system into a target system. |
| Full Load | The process of loading the entire dataset from a source system into a target system. |
| Change Data Capture (CDC) | A technique used to capture changes made to data in a source system, often used in conjunction with watermarking. |

## 4. Core Concepts
Explain the fundamental ideas that form the basis of this topic.
The core concepts of watermarking for incremental loads include:
* Assigning a watermark to each record in the dataset
* Using the watermark to filter out unchanged records during incremental loads
* Updating the watermark for each record when it is updated
* Handling deleted records and other edge cases

## 5. Standard Model
Describe the generally accepted or recommended model.
The standard model for watermarking for incremental loads involves the following steps:
1. Initialize the watermark for each record in the dataset
2. Load the entire dataset into the target system (full load)
3. Update the watermark for each record when it is updated
4. Use the watermark to filter out unchanged records during incremental loads
5. Repeat steps 3-4 as needed

## 6. Common Patterns
Document recurring, accepted patterns.
Common patterns for watermarking for incremental loads include:
* Using a timestamp as the watermark
* Using a version number as the watermark
* Implementing CDC to capture changes to the data
* Using a separate table to store the watermark values

## 7. Anti-Patterns
Describe common but discouraged practices.
Anti-patterns for watermarking for incremental loads include:
* Not updating the watermark when records are updated
* Using a watermark that is not granular enough (e.g., using a single watermark for the entire dataset)
* Not handling deleted records properly
* Not implementing CDC or other change detection mechanisms

## 8. References
Provide exactly five authoritative external references.
1. [Apache NiFi: Incremental Loading](https://nifi.apache.org/docs/nifi-docs/components/nifi-docs.standard-nar/1.11.4/org.apache.nifi.processors.standard.IncrementalLoading.html)
2. [Microsoft Azure: Incremental Data Loading](https://docs.microsoft.com/en-us/azure/data-factory/tutorial-incremental-copy-portal)
3. [Oracle: Incremental Data Loading](https://docs.oracle.com/en/database/oracle/oracle-data-integrator/12.2.1.3/getting-started/tutorials/tutorial-incremental-data-loading.html)
4. [IBM: Incremental Data Loading](https://www.ibm.com/docs/en/infoSphere-datastage/11.7.0?topic=loading-incremental-data)
5. [Talend: Incremental Data Loading](https://help.talend.com/r/en-US/8.0/data-integration/data-integration-components-standard-components/incremental-loading)

## 9. Change Log
| Version | Date | Description |
|---------|------|-------------|
| 1.0 | 2026-01-26 | Initial documentation |