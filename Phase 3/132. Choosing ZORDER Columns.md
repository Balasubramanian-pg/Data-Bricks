# 132. Choosing ZORDER Columns

Canonical documentation for 132. Choosing ZORDER Columns. This document defines the conceptual model, terminology, and standard usage patterns.

> [!NOTE]
> This documentation is implementation-agnostic and intended to serve as a stable reference.

## 1. Purpose and Problem Space
Describe why 132. Choosing ZORDER Columns exists and the class of problems it addresses.
The purpose of choosing ZORDER columns is to optimize the physical storage and retrieval of data in a database, particularly in column-store databases. The problem space revolves around improving query performance, reducing storage requirements, and enhancing data compression. By carefully selecting ZORDER columns, database administrators can significantly impact the efficiency of their database systems.

## 2. Conceptual Overview
Provide a high-level mental model of the topic.
The conceptual overview of choosing ZORDER columns involves understanding how data is physically stored and accessed in a column-store database. ZORDER columns determine the order in which data is stored on disk, which in turn affects the performance of queries that filter, aggregate, or join data. A well-chosen set of ZORDER columns can minimize the amount of data that needs to be read from disk, reduce the number of disk I/O operations, and improve overall query performance.

## 3. Terminology and Definitions
| Term | Definition |
|------|------------|
| ZORDER Column | A column used to determine the physical storage order of data in a column-store database |
| Column-Store Database | A database that stores data in columns instead of rows, optimized for analytical workloads |
| Data Compression | The process of reducing the size of data to minimize storage requirements and improve data transfer efficiency |
| Query Performance | The speed and efficiency with which a database executes queries and returns results |

## 4. Core Concepts
Explain the fundamental ideas that form the basis of this topic.
The core concepts of choosing ZORDER columns include understanding the physical storage layout of a column-store database, the impact of ZORDER columns on query performance, and the trade-offs between different ZORDER column choices. Key considerations include the frequency of queries, the selectivity of queries, and the distribution of data values in the chosen columns.

## 5. Standard Model
Describe the generally accepted or recommended model.
The standard model for choosing ZORDER columns involves selecting columns that are frequently used in query filters, joins, or aggregations. The recommended approach is to choose columns with high selectivity, meaning that the column values are unique or have a limited range. Additionally, columns with a skewed distribution of values may be good candidates for ZORDER columns, as they can help to reduce the number of disk I/O operations required to execute queries.

## 6. Common Patterns
Document recurring, accepted patterns.
Common patterns for choosing ZORDER columns include selecting columns that are used in:
* Query filters, such as WHERE or HAVING clauses
* Join conditions, such as INNER JOIN or OUTER JOIN
* Aggregation functions, such as SUM, AVG, or COUNT
* Sorting or grouping operations, such as ORDER BY or GROUP BY

## 7. Anti-Patterns
Describe common but discouraged practices.
Anti-patterns for choosing ZORDER columns include selecting columns that are:
* Infrequently used in queries
* Highly correlated with other columns, resulting in redundant storage
* Poorly distributed, resulting in inefficient data compression
* Subject to frequent updates or inserts, which can lead to fragmentation and performance degradation

## 8. References
Provide exactly five authoritative external references.
1. [Column-Store Database Systems](https://en.wikipedia.org/wiki/Column-store_DBMS) - Wikipedia
2. [Z-Order Curve](https://en.wikipedia.org/wiki/Z-order_curve) - Wikipedia
3. [Optimizing Column-Store Database Performance](https://docs.microsoft.com/en-us/azure/synapse-analytics/sql-data-warehouse/sql-data-warehouse-physical-design) - Microsoft Azure
4. [Data Compression in Column-Store Databases](https://www.ibm.com/docs/en/db2-for-zos/12?topic=design-data-compression) - IBM Db2
5. [Query Optimization in Column-Store Databases](https://www.postgresql.org/docs/13/queryplanning.html) - PostgreSQL Documentation

## 9. Change Log
| Version | Date | Description |
|---------|------|-------------|
| 1.0 | 2026-01-26 | Initial documentation |