# 83. Explain Plans with explain

Canonical documentation for 83. Explain Plans with explain. This document defines the conceptual model, terminology, and standard usage patterns.

> [!NOTE]
> This documentation is implementation-agnostic and intended to serve as a stable reference.

## 1. Purpose and Problem Space
The `EXPLAIN` statement is a powerful tool used to analyze and optimize the execution plans of SQL queries. It exists to address the class of problems related to query performance, providing insight into how the database management system (DBMS) executes a query. This includes understanding the order of operations, index usage, join methods, and other critical factors that influence query speed and efficiency. By using `EXPLAIN`, developers and database administrators can identify bottlenecks, optimize queries, and improve overall database performance.

## 2. Conceptual Overview
At a high level, `EXPLAIN` is a command that instructs the DBMS to describe the execution plan it would use to execute a given SQL statement without actually executing the statement. This allows for the analysis of the planned execution steps, including the sequence of operations, data access methods, and resource utilization. The output of `EXPLAIN` typically includes information on the type of scan or seek used, the indexes utilized, the join order, and estimated costs and row counts.

## 3. Terminology and Definitions
| Term | Definition |
|------|------------|
| Execution Plan | A sequence of steps the DBMS takes to execute a SQL query. |
| Query Optimization | The process of selecting the most efficient execution plan for a query. |
| Index Scan | An operation where the DBMS reads an index to find the location of the required data. |
| Table Scan | An operation where the DBMS reads the entire table to find the required data. |
| Join Method | The algorithm used to combine rows from two or more tables. |

## 4. Core Concepts
The core concepts of `EXPLAIN` include understanding the different components of an execution plan, such as the parse tree, optimization, and execution. It involves recognizing how the DBMS analyzes the query, selects the optimal plan based on statistics and available resources, and carries out the plan to retrieve the requested data. Key aspects include:
- **Parsing**: Breaking down the SQL statement into its constituent parts.
- **Optimization**: Choosing the best execution plan based on costs, available indexes, and statistics.
- **Execution**: Carrying out the plan, which may involve scanning tables, using indexes, joining tables, and sorting data.

## 5. Standard Model
The standard model for using `EXPLAIN` involves the following steps:
1. **Prepare the Query**: Identify the SQL query to be optimized.
2. **Execute EXPLAIN**: Run the `EXPLAIN` statement followed by the SQL query.
3. **Analyze the Output**: Examine the execution plan to identify potential bottlenecks or areas for improvement.
4. **Optimize the Query**: Based on the analysis, modify the query, create indexes, or adjust database parameters to improve performance.
5. **Verify Improvements**: Rerun `EXPLAIN` and execute the query to confirm performance enhancements.

## 6. Common Patterns
Common patterns when using `EXPLAIN` include:
- **Index Creation**: Creating indexes on columns used in `WHERE`, `JOIN`, and `ORDER BY` clauses to reduce scan times.
- **Query Rewriting**: Rewriting queries to use more efficient join orders or to reduce the number of subqueries.
- **Statistics Updating**: Regularly updating table and index statistics to ensure the optimizer has accurate information.

## 7. Anti-Patterns
Anti-patterns to avoid when using `EXPLAIN` include:
- **Over-Indexing**: Creating too many indexes, which can slow down write operations.
- **Over-Optimization**: Spending too much time optimizing queries that are not performance bottlenecks.
- **Ignoring Statistics**: Failing to update statistics regularly, leading to suboptimal execution plans.

## 8. References
1. **MySQL Documentation: EXPLAIN Syntax** - https://dev.mysql.com/doc/refman/8.0/en/explain.html
2. **PostgreSQL Documentation: EXPLAIN** - https://www.postgresql.org/docs/current/sql-explain.html
3. **SQL Server Documentation: Displaying Execution Plans** - https://docs.microsoft.com/en-us/sql/relational-databases/performance/displaying-execution-plans
4. **Oracle Database Documentation: EXPLAIN PLAN** - https://docs.oracle.com/en/database/oracle/oracle-database/21/tgsql/explain-plan.html
5. **IBM DB2 Documentation: EXPLAIN** - https://www.ibm.com/docs/en/db2-for-zos/12?topic=statements-explain

## 9. Change Log
| Version | Date | Description |
|---------|------|-------------|
| 1.0 | 2026-01-26 | Initial documentation |