# 11. Table Level Permissions

Canonical documentation for [11. Table Level Permissions](Phase 6/11. Table Level Permissions.md). This document defines concepts, terminology, and standard usage.

## Purpose
Table Level Permissions exist to provide a structured authorization layer between the database level and the individual record level. The primary goal is to govern access to specific data entities (tables) based on the identity and role of the requesting principal. By defining permissions at the table level, administrators can ensure that users and services interact only with the data structures necessary for their function, thereby maintaining data confidentiality, integrity, and availability.

> [!NOTE]
> This documentation is intended to be implementation-agnostic and authoritative, focusing on the logical enforcement of access control rather than specific SQL syntax or vendor-specific configurations.

## Scope
This documentation covers the theoretical framework and standard practices for managing access to tabular data structures.

> [!IMPORTANT]
> **In scope:**
> * Definition of standard privileges (CRUD mapping).
> * Relationship between principals, roles, and tables.
> * Inheritance and hierarchy within table access.
> * Administrative delegation of table rights.

> [!WARNING]
> **Out of scope:**
> * Row-Level Security (RLS) or Column-Level Security (CLS), which deal with data subsets within a table.
> * Physical storage security or encryption at rest.
> * Specific vendor implementations (e.g., PostgreSQL `GRANT`, AWS IAM policies, or Snowflake RBAC).

## Definitions
| Term | Definition |
|------|------------|
| Principal | An entity (user, service account, or process) that can be authenticated and authorized. |
| Privilege | A specific right to perform an action on a table (e.g., Read, Write, Delete). |
| Table | A collection of related data held in a structured format within a database, consisting of columns and rows. |
| Grant | The process of assigning a privilege to a principal or role. |
| Revoke | The process of removing a previously assigned privilege. |
| Role | A logical grouping of privileges that can be assigned to one or more principals. |
| Schema | A logical container for tables; permissions often flow from the schema level to the table level. |

## Core Concepts
The fundamental idea of Table Level Permissions is the "Gatekeeper" concept. While a principal may have access to a database, they are stopped at the entrance of each individual table unless they possess the specific key (privilege) required for that table.

> [!TIP]
> Think of a database as a secure office building. Having database access is like having a badge to enter the front door. Table Level Permissions are the specific keycards required to enter individual rooms (tables) within that building. Just because you are in the building doesn't mean you have the right to enter the HR records room.

### The Principle of Least Privilege (PoLP)
Table Level Permissions are the primary tool for implementing PoLP in data management. Principals should only be granted the minimum permissions necessary to complete their tasks. For example, a reporting service should have `SELECT` (Read) privileges but should never be granted `DROP` or `DELETE` privileges.

### Privilege Atomicity
Permissions are typically atomic. Granting a "Write" privilege does not inherently grant a "Delete" privilege unless explicitly defined by the security model. This allows for granular control over data lifecycle operations.

## Standard Model
The standard model for Table Level Permissions follows a structured hierarchy:

1.  **Administrative/Owner:** Full control over the table, including the ability to modify the schema, truncate data, or drop the table entirely.
2.  **Data Modification (DML):** The ability to `INSERT`, `UPDATE`, and `DELETE` rows within the table.
3.  **Data Retrieval:** The ability to `SELECT` or read data from the table.
4.  **Metadata Access:** The ability to view the table's structure (columns, types, constraints) without necessarily seeing the data within.

In most modern systems, these are managed via **Role-Based Access Control (RBAC)**, where permissions are assigned to roles, and roles are assigned to users.

## Common Patterns
*   **Read-Only Analytics:** A pattern where a group of users is granted `SELECT` access to all tables in a reporting schema, but no modification rights.
*   **Service-Specific Access:** Assigning a dedicated service account to a specific application, granting it full DML rights only to the tables that the application manages.
*   **Schema-Level Inheritance:** Defining permissions at the Schema level that automatically apply to all current and future tables within that schema.

## Anti-Patterns
*   **The "Superuser" Application:** Connecting an application to a database using an owner or superuser account. This bypasses table-level security and creates a massive blast radius in the event of a credential leak.
*   **Manual Individual Grants:** Assigning permissions to individual user accounts rather than roles. This leads to "permission drift" and makes auditing nearly impossible.
*   **Implicit Trust:** Assuming that because a table is "internal" or "temporary," it does not require defined permissions.

> [!CAUTION]
> Avoid circular dependencies where Table A requires permissions from Table B to be viewed, but Table B's permissions are managed by a process that requires access to Table A. This can lead to administrative deadlocks.

## Edge Cases
*   **Views and Materialized Views:** A principal may have permission to query a View but not the underlying base tables. This is often used as a security feature to mask sensitive data.
*   **Temporary Tables:** Tables created during a session often inherit the permissions of the creator, but their visibility to other principals varies by implementation.
*   **Table Renaming:** In some systems, renaming a table preserves the permission grants; in others, the permissions are dropped because the object identifier has changed.
*   **Truncation vs. Deletion:** In many models, `TRUNCATE` is considered a DDL (Data Definition Language) operation and requires higher privileges than a standard `DELETE` (DML) operation.

## Related Topics
*   **Identity and Access Management (IAM):** The broader system for managing principals.
*   **Row-Level Security (RLS):** Filtering rows within a table based on user attributes.
*   **Column-Level Security (CLS):** Restricting access to specific columns (e.g., PII) within a table.
*   **Data Masking:** Obfuscating data within a table for unauthorized users.

## Change Log
| Version | Date | Description |
|---------|------|-------------|
| 1.0 | 2026-01-26 | Initial AI-generated canonical documentation |