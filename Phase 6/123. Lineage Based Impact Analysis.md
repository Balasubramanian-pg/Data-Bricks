# 123. Lineage Based Impact Analysis

Canonical documentation for [123. Lineage Based Impact Analysis](Phase 6/123. Lineage Based Impact Analysis.md). This document defines concepts, terminology, and standard usage.

## Purpose
Lineage Based Impact Analysis (LBIA) exists to quantify and qualify the downstream and upstream consequences of changes within a data ecosystem. In modern data architectures, components are deeply interconnected; a change to a single schema, data type, or transformation logic can trigger a cascade of failures across reports, machine learning models, and regulatory filings.

The primary problem space LBIA addresses is the "visibility gap" in data management. By leveraging metadata that describes the flow of data (lineage), organizations can move from reactive "break-fix" cycles to proactive change management, ensuring data reliability and operational stability.

> [!NOTE]
> This documentation is intended to be implementation-agnostic and authoritative, focusing on the logical framework of impact analysis rather than specific software tooling.

## Scope
This documentation covers the theoretical and functional requirements for performing impact analysis using metadata-driven lineage.

> [!IMPORTANT]
> **In scope:**
> * Core functionality: Traversal algorithms, dependency mapping, and impact radius calculation.
> * Theoretical boundaries: Metadata requirements, granularity levels (table vs. column), and temporal considerations.
> * Stakeholder communication: Notification logic and risk assessment frameworks.

> [!WARNING]
> **Out of scope:**
> * Specific vendor implementations (e.g., dbt, Collibra, Informatica).
> * Data profiling or data quality testing (though these may be triggered by LBIA).
> * Physical storage optimization.

## Definitions
| Term | Definition |
|------|------------|
| Lineage | The lifecycle of data that includes its origins and where it moves over time. |
| Impact Radius | The total set of downstream entities (nodes) affected by a change to a specific upstream entity. |
| Upstream (Ancestry) | The set of entities that provide data to a specific node. |
| Downstream (Descendants) | The set of entities that consume data from a specific node. |
| Node | A discrete unit in a data flow, such as a table, view, column, or report. |
| Edge | The relationship or transformation logic connecting two nodes. |
| Granularity | The level of detail at which lineage is captured (e.g., System-level, Table-level, or Column-level). |

## Core Concepts
The fundamental idea of LBIA is to treat the data ecosystem as a Directed Acyclic Graph (DAG). In this graph, nodes represent data assets and edges represent the movement or transformation of data.

**1. Directionality of Impact**
Impact analysis typically flows in two directions:
*   **Forward Impact Analysis:** Determining what will break downstream if an upstream component is modified.
*   **Backward Impact Analysis (Root Cause):** Determining which upstream components contributed to a failure or anomaly observed downstream.

**2. Granularity and Precision**
The effectiveness of impact analysis is directly proportional to the granularity of the lineage metadata. Table-level lineage may indicate that a report is "at risk," but column-level lineage can confirm whether the specific field being changed is actually used by that report, reducing "false positive" alerts.

> [!TIP]
> Think of lineage as a municipal water system. If a treatment plant (upstream) changes its filtration process, impact analysis identifies which specific neighborhoods (downstream) will receive the new water. Without a map (lineage), the utility company must wait for customer complaints to identify the affected areas.

## Standard Model
The standard model for Lineage Based Impact Analysis follows a four-stage lifecycle:

1.  **Change Identification:** A proposed change is defined (e.g., "Rename column `user_id` to `customer_uuid`").
2.  **Graph Traversal:** The analysis engine queries the metadata repository to identify all edges originating from the target node. It recursively follows these edges to the terminal nodes (e.g., BI dashboards, API endpoints).
3.  **Impact Classification:** Each affected node is classified based on the severity of the change (e.g., Breaking Change, Schema Evolution, or Metadata-only update).
4.  **Reporting and Notification:** A summary of the impact radius is generated, and owners of downstream assets are notified.

## Common Patterns
*   **Pre-deployment Validation:** Running impact analysis as part of a CI/CD pipeline to block merges that would break critical downstream assets.
*   **Regulatory Compliance Mapping:** Using lineage to identify all locations where PII (Personally Identifiable Information) is stored to ensure a change in privacy policy is applied globally.
*   **Deprecation Workflows:** Identifying unused downstream assets to safely decommission upstream data sources and reduce technical debt.

## Anti-Patterns
*   **Manual Impact Mapping:** Relying on human memory or static documentation to track dependencies. This is prone to error and quickly becomes obsolete.
*   **Notification Fatigue:** Alerting every downstream consumer for every minor change, leading to stakeholders ignoring critical warnings.
*   **Siloed Lineage:** Capturing lineage only within a single tool (e.g., the ETL tool) while ignoring the impact on the final consumption layer (e.g., the BI tool).

> [!CAUTION]
> Avoid circular dependencies in your data model. While LBIA is designed for Directed Acyclic Graphs (DAGs), poorly designed systems with circular references can cause traversal algorithms to enter infinite loops or provide misleading impact reports.

## Edge Cases
*   **Dynamic SQL and Late Binding:** Systems that generate queries at runtime often hide their lineage from static analysis tools, creating "blind spots" in the impact radius.
*   **Transient Data Structures:** Temporary tables or in-memory transformations that exist only during a job execution may not be captured in persistent lineage metadata.
*   **Cross-Platform Gaps:** Data moving through "black boxes" (e.g., a proprietary third-party API or an encrypted file transfer) where the internal transformation logic is inaccessible.
*   **Conditional Logic:** Lineage that only exists under certain parameters (e.g., data that only flows to a specific table if a `country_code` is 'US').

## Related Topics
*   **Data Governance:** The overarching framework for managing data authority and consistency.
*   **Metadata Management:** The practice of collecting and organizing the data that enables lineage.
*   **Data Observability:** The broader field of monitoring data health, of which LBIA is a critical component.
*   **Change Management:** The organizational process for transitioning individuals, teams, and organizations to a desired future state.

## Change Log
| Version | Date | Description |
|---------|------|-------------|
| 1.0 | 2026-01-26 | Initial AI-generated canonical documentation |